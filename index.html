<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>è¿½åŠ‡ç´€éŒ„</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; background:#f6f7f8; margin:0; }
    header { background:#111; color:#fff; padding:16px; font-size:20px; }
    main { padding:16px; max-width:1200px; margin:auto; }
    h2 { margin-top:32px; }
    form { display:grid; grid-template-columns: repeat(auto-fit,minmax(140px,1fr)); gap:8px; background:#fff; padding:16px; border-radius:8px; }
    input, select, textarea, button { padding:8px; font-size:14px; }
    textarea { grid-column: 1 / -1; }
    button { cursor:pointer; }
    table { width:100%; border-collapse:collapse; margin-top:16px; background:#fff; }
    th, td { border-bottom:1px solid #eee; padding:8px; text-align:left; font-size:13px; }
    th { background:#fafafa; }
    tr:hover { background:#f1f3f5; }
    .actions button { margin-right:4px; }
  </style>
</head>
<body>
<header>ğŸ“º æˆ‘çš„è¿½åŠ‡ç´€éŒ„</header>
<main>

<div id="tabs">
  <button class="tab" data-type="å…¨éƒ¨">å…¨éƒ¨</button>
  <button class="tab" data-type="é›»å½±">é›»å½±</button>
  <button class="tab" data-type="å½±é›†">å½±é›†</button>
  <button class="tab" data-type="ç¶œè—">ç¶œè—</button>
  <button class="tab" data-type="å‹•æ¼«">å‹•æ¼«</button>
  <button class="tab" data-type="å°èªª">å°èªª</button>
  <button class="tab" data-type="æ¼«ç•«">æ¼«ç•«</button>
</div>

<form id="recordForm">
  <input type="hidden" id="editIndex" />

  <select id="mainType" required>
    <option value="">å¤§åˆ†é¡</option>
    <option>é›»å½±</option>
    <option>å½±é›†</option>
    <option>ç¶œè—</option>
    <option>å‹•æ¼«</option>
    <option>å°èªª</option>
    <option>æ¼«ç•«</option>
  </select>
 <select id="country">
  <option value="">åœ‹å®¶</option>
  <option>æ—¥æœ¬</option>
  <option>éŸ“åœ‹</option>
  <option>å¤§é™¸</option>
  <option>å°ç£</option>
  <option>æ­ç¾</option>
</select>

  <input id="startDate" type="date" />
  <input id="title" placeholder="åç¨±" required />
  <select id="rating">
    <option value="">è©•åˆ†</option>
    <option>â­</option><option>â­â­</option><option>â­â­â­</option><option>â­â­â­â­</option><option>â­â­â­â­â­</option>
  </select>
  <select id="ott">
    <option value="">OTT / ä¾†æº</option>
    <option>Netflix</option><option>Disney+</option><option>BiliBili</option><option>IQiyi</option><option>YouTube</option><option>Fridayså½±éŸ³</option><option>å…¶ä»–</option>
  </select>
  <select id="watchStatus">
    <option>æœªè§€çœ‹</option><option>è§€çœ‹ä¸­</option><option>å·²å®Œæˆ</option><option>æ£„åŠ‡</option>
  </select>
  <input id="season" placeholder="å­£åˆ¥" />
  <input id="episode" placeholder="é€²åº¦ (5/12)" />
  <input id="totalEp" placeholder="é›†æ•¸" />
  <select id="category">
    <option value="">é¡åˆ¥</option>
    <option>å‹•ä½œ</option><option>åŠ‡æƒ…</option><option>å–œåŠ‡</option><option>æ„›æƒ…</option><option>ç§‘å¹»</option><option>æ‡¸ç–‘</option>
  </select>
  <input id="author" placeholder="ä½œè€… / åŸä½œ" />
  <textarea id="note" placeholder="å‚™è¨»"></textarea>
  <button type="submit">å„²å­˜</button>
</form>

<table>
  <thead>
    <tr>
      <th>é¡å‹</th><th>åœ‹å®¶</th><th>åç¨±</th><th>è©•åˆ†</th><th>ä¾†æº</th><th>ç‹€æ…‹</th><th>å­£</th><th>é€²åº¦</th><th>é›†æ•¸</th><th>é¡åˆ¥</th><th>ä½œè€…</th><th>å‚™è¨»</th><th>æ“ä½œ</th>
    </tr>
  </thead>
  <tbody id="recordTable"></tbody>
</table>

</main>

<script>
let records = JSON.parse(localStorage.getItem("records") || "[]");
let currentTab = "å…¨éƒ¨";

const form = document.getElementById("recordForm");
const table = document.getElementById("recordTable");

// Tab åˆ‡æ›
const tabs = document.querySelectorAll(".tab");
tabs.forEach(btn => {
  btn.onclick = () => {
    currentTab = btn.dataset.type;
    tabs.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    render();
  };
});

function save() {
  localStorage.setItem("records", JSON.stringify(records));
}

function render() {
  table.innerHTML = "";

  records
    .filter(r => currentTab === "å…¨éƒ¨" || r.mainType === currentTab)
    .forEach((r, i) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${r.mainType}</td>
        <td>${r.country}</td>
        <td>${r.title}</td>
        <td>${r.rating || ""}</td>
        <td>${r.ott || ""}</td>
        <td>${r.watchStatus || ""}</td>
        <td>${r.season || ""}</td>
        <td>${r.episode || ""}</td>
        <td>${r.totalEp || ""}</td>
        <td>${r.category || ""}</td>
        <td>${r.author || ""}</td>
        <td>${r.note || ""}</td>
        <td class="actions">
          <button onclick="editRecord(${i})">ç·¨è¼¯</button>
          <button onclick="deleteRecord(${i})">åˆªé™¤</button>
        </td>`;
      table.appendChild(tr);
    });
}

form.onsubmit = e => {
  e.preventDefault();

  const data = {
    mainType: mainType.value,
    country: country.value,
    startDate: startDate.value,
    title: title.value,
    rating: rating.value,
    ott: ott.value,
    watchStatus: watchStatus.value,
    season: season.value,
    episode: episode.value,
    totalEp: totalEp.value,
    category: category.value,
    author: author.value,
    note: note.value
  };

  const index = editIndex.value;
  if (index === "") records.push(data);
  else {
    records[index] = data;
    editIndex.value = "";
  }

  form.reset();
  save();
  render();
};

function editRecord(i) {
  const r = records[i];
  editIndex.value = i;
  mainType.value = r.mainType;
  country.value = r.country;
  startDate.value = r.startDate || "";
  title.value = r.title;
  rating.value = r.rating;
  ott.value = r.ott;
  watchStatus.value = r.watchStatus;
  season.value = r.season;
  episode.value = r.episode;
  totalEp.value = r.totalEp;
  category.value = r.category;
  author.value = r.author;
  note.value = r.note;
}

function deleteRecord(i) {
  if (confirm("ç¢ºå®šè¦åˆªé™¤ï¼Ÿ")) {
    records.splice(i, 1);
    save();
    render();
  }
}

// é è¨­å•Ÿç”¨ã€Œå…¨éƒ¨ã€åˆ†é 
if (tabs.length) tabs[0].classList.add("active");
render();
</script>
</body>
</html>
